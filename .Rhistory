pdata<-pdata.frame(data, index=c("HH_Code", "Year"))
rm(Pdata)
View(pdata)
names(data)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt", "Depndency_ratio",
"shock", "factor(Year)",
"factor(Dist)", "factor(VDC)")
models <- list()
# Loop to create models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
data <- read_dta(paste0(data_dir, "PANEL17012024.dta"))
data_dir<-"../../dataset/"
data <- read_dta(paste0(data_dir, "PANEL17012024.dta"))
library(plm)
library(stargazer)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("HH_Code", "Year"))
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt", "Depndency_ratio",
"shock", "factor(Year)",
"factor(Dist)", "factor(VDC)")
# Loop to create models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
View(models)
pOLS.1 <- models[[1]]
pOLS.2 <- models[[2]]
pOLS.3 <- models[[3]]
pOLS.4 <- models[[4]]
pOLS.5 <- models[[5]]
pOLS.6 <- models[[6]]
pOLS.7 <- models[[7]]
pOLS.8 <- models[[8]]
getwd()
***********Getting the results into the latex***************
##------------------------------Getting the results into the latex--------------
pols_results<- stargazer(
pOLS.1, pOLS.2, pOLS.3, pOLS.4, pOLS.5, pOLS.6, pOLS.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Pooled OLS Regression",
align = TRUE,
out = "../../dataset/processed/regression_results/Pooled_OLS_Regression.tex" # Specify the output file
)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "random")
}
##--------Getting the random effects regression results into the latex----------
pols_results<- stargazer(
re.1, re.2, re.3, re.4, re.5, re.6, re.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Pooled OLS Regression",
align = TRUE,
out = "../../dataset/processed/regression_results/Random_Effects_Regression.tex" # Specify the output file
)
re.1 <- models[[1]]
re.2 <- models[[2]]
re.3 <- models[[3]]
re.4 <- models[[4]]
re.5 <- models[[5]]
re.6 <- models[[6]]
re.7 <- models[[7]]
re.8 <- models[[8]]
##--------Getting the random effects regression results into the latex----------
re_results<- stargazer(
re.1, re.2, re.3, re.4, re.5, re.6, re.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Pooled OLS Regression",
align = TRUE,
out = "../../dataset/processed/regression_results/Random_Effects_Regression.tex" # Specify the output file
)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "within")
}
fe.1 <- models[[1]]
fe.2 <- models[[2]]
fe.3 <- models[[3]]
fe.4 <- models[[4]]
fe.5 <- models[[5]]
fe.6 <- models[[6]]
fe.7 <- models[[7]]
fe.8 <- models[[8]]
##--------Getting the random effects regression results into the latex----------
re_results<- stargazer(
fe.1, fe.2, fe.3, fe.4, fe.5, fe.6, fe.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Fixed Effects Regression",
align = TRUE,
out = "../../dataset/processed/regression_results/Fixed_Effects_Regression.tex" # Specify the output file
)
View(data)
************Test the need for time fixed effects*****
plmtest(pols.7, test="time")
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
data_dir<-"../../dataset/"
data <- read_dta(paste0(data_dir, "PANEL17012024.dta"))
library(plm)
library(stargazer)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("HH_Code", "Year"))
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
pols.1 <- models[[1]]
pols.2 <- models[[2]]
pols.3 <- models[[3]]
pols.4 <- models[[4]]
pols.5 <- models[[5]]
pols.6 <- models[[6]]
pols.7 <- models[[7]]
pols.8 <- models[[8]]
plmtest(pols.7, test="time")
View(pols.7)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "within")
}
fe.1 <- models[[1]]
fe.2 <- models[[2]]
fe.3 <- models[[3]]
fe.4 <- models[[4]]
fe.5 <- models[[5]]
fe.6 <- models[[6]]
fe.7 <- models[[7]]
************Test the need for need for individual fixed effects*****
pFtest(fe.7, pols.7)
plmtest(pols.7, type=c("bp"))
pFtest<- pFtest(fe.7, pols.7)
pFtest(fe.7, pols.7)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "random")
}
re.1 <- models[[1]]
re.2 <- models[[2]]
re.3 <- models[[3]]
re.4 <- models[[4]]
re.5 <- models[[5]]
re.6 <- models[[6]]
re.7 <- models[[7]]
phtest(re.7, fe.7)
##----------------------------LM test for RE vs OLS
plmtest(pols.7, type=c("bp"))
output  <-"../../output/"
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
data_dir<-"../../dataset/"
output  <-"../../output/"
data <- read_dta(paste0(data_dir, "PANEL17012024.dta"))
library(plm)
library(stargazer)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("HH_Code", "Year"))
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
pols.1 <- models[[1]]
pols.2 <- models[[2]]
pols.3 <- models[[3]]
pols.4 <- models[[4]]
pols.5 <- models[[5]]
pols.6 <- models[[6]]
pols.7 <- models[[7]]
##--------Getting the pooled ols regression results into the latex--------------
pols_results<- stargazer(
pols.1, pols.2, pols.3, pols.4, pols.5, pols.6, pols.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Pooled OLS Regression",
align = TRUE,
out = paste0(output, "regression_results/Pooled_OLS_Regression.tex") # Specify the output file
)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "random")
}
re.1 <- models[[1]]
re.2 <- models[[2]]
re.3 <- models[[3]]
re.4 <- models[[4]]
re.5 <- models[[5]]
re.6 <- models[[6]]
re.7 <- models[[7]]
##--------Getting the random effects regression results into the latex----------
re_results<- stargazer(
re.1, re.2, re.3, re.4, re.5, re.6, re.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Random Effects Regression",
align = TRUE,
out = paste0(output, "regression_results/Random_Effects_Regression.tex") # Specify the output file
)
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
adding_variables <- c("ln_Debt",      "Depndency_ratio", "shock",
"factor(Year)", "factor(Dist)",    "factor(VDC)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "within")
}
fe.1 <- models[[1]]
fe.2 <- models[[2]]
fe.3 <- models[[3]]
fe.4 <- models[[4]]
fe.5 <- models[[5]]
fe.6 <- models[[6]]
fe.7 <- models[[7]]
##--------Getting the random effects regression results into the latex----------
re_results<- stargazer(
fe.1, fe.2, fe.3, fe.4, fe.5, fe.6, fe.7,
type = 'text', # Specify LaTeX output
omit.stat = c("f"), #remove F statistics
omit = c("Year", "Dist", "VDC"), #omit the fixed effects
omit.labels = c("Year-fixed effects", "District-fixed effects", "VDC-fixed effects"),
omit.yes.no = c("Yes", "No"),
title = "Fixed Effects Regression",
align = TRUE,
out = paste0(output, "regression_results/Fixed_Effects_Regression.tex") # Specify the output file
)
##------------------------Test the need for time fixed effects----------------##
time_fe<-plmtest(pols.7, test="time")
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda") # Specify the output file
)
##------------------------Test the need for time fixed effects----------------##
time_fe<-plmtest(pols.7, test="time")
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
latex_code <- stargazer(
pFtest,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = "D:\\Research\\A unique environmental augmented household-level livelihood dataset from Nepal\\Thesis\\WRITE-UP\\BPLM.tex" # Specify the output file
)
plmtest(pols.7, test="time")
time_fe<-plmtest(pols.7, test="time")
View(time_fe)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Breusch Pagan Lagrange Multiplier test for Random effects",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test")
time_fe <- stargazer(
as.matrix(time_fe),
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
##------------------------Test the need for time fixed effects----------------##
time_fe<-as.matrix(plmtest(pols.7, test="time"))
View(time_fe)
View(time_fe)
View(time_fe)
time_fe<-as.matrix(plmtest(pols.7, test="time"))
View(time_fe)
View(time_fe)
View(time_fe)
View(time_fe)
plmtest((POLS.4), type = "bp")
plmtest((pols.4), type = "bp")
plmtest((pols.7), test="time")
##------------------------Test the need for time fixed effects----------------##
time_fe<-plmtest((pols.7), test="time")
time_fe <- stargazer(
as.matrix(time_fe),
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
as.matrix(time_fe),
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test" # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'text', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
view(time_fe)
time_fe <- stargazer(
time_fe,
type = 'tex', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = 'latex', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
view(time_fe)
?stargazer
time_fe <- stargazer(
time_fe,
type = 'latex', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
style = "default",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
##------------------------Test the need for time fixed effects----------------##
time_fe<-plmtest((pols.7), test="time")
View(time_fe)
time_fe <- stargazer(
time_fe,
type = 'latex', # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
style = "default",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = "latex", # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
style = "default",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
time_fe <- stargazer(
time_fe,
type = "latex", # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
style = "default",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
?plmtest
##------------------------Test the need for time fixed effects----------------##
time_fe<-plmtest(pols.7, test="time")
View(time_fe)
plmtest(pols.7, test="time")
time_fe <- stargazer(
time_fe,
type = "latex", # Specify LaTeX output
title = "Lagrange Multiplier Test - (Honda) Time Effects Test",
style = "default",
out = paste0(output, "diagnostic_tests/time_effects_honda.tex") # Specify the output file
)
stargazer(time_fe)
?stargazer
stargazer(time_fe, type = "latex")
stargazer(time_fe, type = "latex", style = "default")
stargazer(time_fe, type = "latex", style = "default")
plmtest(fe.7, test = "individual")
plmtest(fe.7, type = "individual")
plmtest(fe.7, effect = "individual")
library(dplyr)
data <- data.frame(
hh_code = c("A", "A", "A", "B", "B", "C", "C", "C", "C"),
year = c(2006, 2009, 2012, 2006, 2009, 2006, 2009, 2012, 2012),
other_info = c(1, 2, 3, 4, 5, 6, 7, 8, 9)  # Some other columns
)
result <- data %>%
group_by(hh_code) %>%
summarise(year_count = n_distinct(year)) %>%
mutate(all_years_present = ifelse(year_count == 3, TRUE, FALSE)) %>%
select(hh_code, all_years_present)
View(result)
View(data)
