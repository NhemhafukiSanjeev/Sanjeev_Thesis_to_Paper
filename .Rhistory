sd_elders_no         = sd(elders_no),
mean_implements      = mean(implements),
sd_implements        = sd(implements),
mean_livestock       = mean(livestock),
sd_livestock         = sd(livestock),
mean_land            = mean(land),
sd_land              = sd(land),
mean_total_income    = mean(total_income),
sd_total_income      = sd(total_income),
mean_bank_saving     = mean(bank_saving),
sd_bank_saving       = sd(bank_saving),
mean_jewellery       = mean(jewellery),
sd_jewellery         = sd(jewellery),
mean_livelihood_no   = mean(livelihood_no),
sd_livelihood_no     = sd(livelihood_no),
mean_hvi             = mean(hvi),
sd_hvi               = sd(hvi)) %>%
mutate(   mean_sd_hh_age          = paste(mean_hh_age, " (", sd_hh_age, ")"),
mean_sd_hh_edu          = paste(mean_hh_edu, " (", sd_hh_edu, ")"),
mean_sd_max_hh_edu      = paste(mean_max_hh_edu, " (", sd_max_hh_edu, ")"),
mean_sd_hh_caste        = paste(mean_hh_caste, " (", sd_hh_caste, ")"),
mean_sd_male_adult_no   = paste(mean_male_adult_no, " (", sd_male_adult_no, ")"),
mean_sd_female_adult_no = paste(mean_female_adult_no, " (", sd_female_adult_no, ")"),
mean_sd_child_no        = paste(mean_child_no, " (", sd_child_no, ")"),
mean_sd_elders_no       = paste(mean_elders_no, " (", sd_elders_no, ")"),
mean_sd_implements      = paste(mean_implements, " (", sd_implements, ")"),
mean_sd_livestock       = paste(mean_livestock, " (", sd_livestock, ")"),
mean_sd_land            = paste(mean_land, " (", sd_land, ")"),
mean_sd_total_income    = paste(mean_total_income, " (", sd_total_income, ")"),
mean_sd_bank_saving     = paste(mean_bank_saving, " (", sd_bank_saving, ")"),
mean_sd_jewellery       = paste(mean_jewellery, " (", sd_jewellery, ")"),
mean_sd_livelihood_no   = paste(mean_livelihood_no, " (", sd_livelihood_no, ")"),
mean_sd_hvi             = paste(mean_hvi, " (", sd_hvi, ")"))
View(mean_sd_1)
mean_sd_2 <- final_data %>%
group_by(year, district, vdc) %>%
summarise(
mean_env_dependence      = mean(ln_env_tot_income_ratio),
sd_env_dependence        = sd(ln_env_tot_income_ratio),
mean_dependency_ratio    = mean(dependency_ratio),
sd_dependency_ratio      = sd(dependency_ratio),
mean_debt                = mean(debt),  # Fix: Add closing parenthesis here
sd_debt                  = sd(debt),
mean_shock               = mean(shocks_no),
sd_shock                 = sd(shocks_no)) %>%
mutate(   mean_sd_env_dependence   = paste(mean_env_dependence, " (", sd_env_dependence, ")"),
mean_sd_dependency_ratio = paste(mean_dependency_ratio, " (", sd_dependency_ratio, ")"),
mean_sd_debt             = paste(mean_debt, " (", sd_debt, ")"),
mean_sd_shock            = paste(mean_shock, " (", sd_shock, ")"))
View(mean_sd_2)
#######Adding the variables#########
hvi_data <- prep_data %>%
mutate(hvi                     = (hh_age      + hh_edu      + max_hh_edu  +
implements  + livestock   + land        +
hh_caste    + bank_saving + jewellery   +
livelihood_no)/10,
env_tot_income_ratio    = (env_income/total_income),
env_tot_income_ratio    = case_when(env_tot_income_ratio == "NaN" ~ 0,
TRUE ~ env_tot_income_ratio),
env_tot_income_ratio    = (env_tot_income_ratio + 2.409813),  #2.409811 was added to make the negative values to 1 for log transformation
ln_env_tot_income_ratio = log(env_tot_income_ratio),
dependency_ratio        = (child_no+elders_no)/(male_adult_no + female_adult_no),
dependency_ratio        = case_when(dependency_ratio == "Inf" ~ 0,
TRUE ~ dependency_ratio),
ln_debt                 = log(debt),
ln_debt                 = case_when(ln_debt == "-Inf" ~ 0,
TRUE ~ ln_debt))
join_data<-hvi_data |>
select(hh_code, hvi, env_tot_income_ratio, ln_env_tot_income_ratio, dependency_ratio, ln_debt)
final_data<-left_join(full_panel, join_data, by = "hh_code")
View(final_data)
mean_sd_2 <- final_data %>%
group_by(year, district, vdc) %>%
summarise(
mean_env_dependence      = mean(env_tot_income_ratio),
sd_env_dependence        = sd(env_tot_income_ratio),
mean_dependency_ratio    = mean(dependency_ratio),
sd_dependency_ratio      = sd(dependency_ratio),
mean_debt                = mean(debt),  # Fix: Add closing parenthesis here
sd_debt                  = sd(debt),
mean_shock               = mean(shocks_no),
sd_shock                 = sd(shocks_no)) %>%
mutate(   mean_sd_env_dependence   = paste(mean_env_dependence, " (", sd_env_dependence, ")"),
mean_sd_dependency_ratio = paste(mean_dependency_ratio, " (", sd_dependency_ratio, ")"),
mean_sd_debt             = paste(mean_debt, " (", sd_debt, ")"),
mean_sd_shock            = paste(mean_shock, " (", sd_shock, ")"))
View(mean_sd_2)
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
library("dplyr")
library("stargazer")
data_dir<-"../dataset/raw/"
output  <-"/../output/"
data <- read.csv(paste0(data_dir, "data_pen.csv"))
##----------------------------removing missing data-----------------------------
no_missing_data<-na.omit(data)
saveRDS(no_missing_data, "../dataset/intermediate/no_missing_data.rds")
##---------------------------renaming variable names----------------------------
renamed_data<-no_missing_data |>
rename(hh_code                 = household_code,
vdc                     = village_,
district                = district_,
hh_age                  = Age_head_,
hh_edu                  = Head_educ_,
hh_caste                = Head_belong_Biggest_caste_,
max_hh_edu              = Max_HH_educ_,
child_no                = num_of_children_,
male_adult_no           = num_of_male_adults_,
female_adult_no         = num_of_female_adults_,
elders_no               = num_of_elders_,
implements              = Total_imp_value_aeu_,
livestock               = Tot_livstk_end_val_aeu_,
land                    = Total_land_owned_sqm_aeu_,
bank_saving             = Bank_saving_aeu_,
jewellery               = Jewellery_aeu_,
debt                    = debt_aeu_,
env_income              = Tot_env_inc_aeu_,
crop_income             = Tot_crop_inc_aeu_,
livestock_income        = Tot_live_inc_aeu_,
remit_income            = Remit_inc_aeu_,
support_income          = Tot_suppot_inc_aeu_,
other_income            = Tot_other_inc_aeu_,
biz_income              = Biz_inc_aeu_,
wage_income             = Tot_wage_inc_aeu_,
total_income            = Total_inc_aeu_) |>
select(hh_code:elders_no, implements, livestock, land, bank_saving, jewellery,
debt, env_income, crop_income, livestock_income, remit_income, support_income,
other_income, biz_income, wage_income, total_income, everything()) |>
select(-c(contains("High_")   | contains("low_") | contains("other_imp")|
contains("livstk")  | contains("hives")| contains("sqm")|
contains("inc_aeu_")| contains("aeu_")))
saveRDS(renamed_data, "../dataset/intermediate/renamed_data.rds")
##---------------Counting number of shocks and livelihoods----------------------
##------------------------------------Shocks------------------------------------
count_data<-renamed_data |>
mutate(shock_less_severe       = Serious_crop_fail_ + Serious_illness_+ Death_adult_
+ land_loss_ + Livestock_loss_ + Oth_asset_loss_
+ wage_employ_loss_ + Costly_social_events_,
shock_more_severe       = Serious_crop_fail_severe_ + Serious_illness_severe_+
Death_adult_severe_ + Land_loss_severe_ +
Livestock_loss_severe_ +  Oth_asset_loss_severe_ +
wage_employ_loss_severe_ + Costly_social_events_severe_,
shocks_no               = shock_less_severe + shock_more_severe)  |>
select(-c(contains("Serious") | contains("Death_") |
contains("loss_")   | contains("_social")|contains("_severe")))
saveRDS(count_data, "../dataset/intermediate/shock_count_data.rds")
##----------------------Selecting the variables of interest to count------------
selected_vars<-c("env_income",   "crop_income",    "livestock_income",
"remit_income", "support_income", "other_income",
"biz_income",   "wage_income")
##--------Counting the Livelihoods(variables with non-zero columns)-------------
livelihood_data <- count_data %>%
mutate(livelihood_no      = rowSums(select(., selected_vars) != 0))
saveRDS(livelihood_data, "../dataset/intermediate/livelihood_count_data.rds")
##-----------------------------grouping data by hh_code-------------------------
grouped_data<-livelihood_data[order(livelihood_data$hh_code),]
##------identification of panel data to remove the non-panel observations-------
panel_identifier<-grouped_data |>
group_by(hh_code) |>
summarise(count_yr             = n_distinct(year)) |>
mutate(all_yr_present          = case_when(count_yr == 3 ~ T,
TRUE  ~ F))
##---------------joining panel identifier data and grouped data-----------------
panel_id_data<-left_join(livelihood_data, panel_identifier, by = "hh_code")
##----------removing the non-panel data and keep full panel data only-----------
full_panel<-panel_id_data |>
filter(all_yr_present == TRUE) |>
select(-c(contains("yr") |contains("Head_"), crop_income:wage_income))
full_panel<-full_panel[order(full_panel$hh_code),]
saveRDS(full_panel, "../dataset/processed/full_panel.rds")
##-------------------------Applying Mini-max/Maxi-min scaling-------------------
##------------------------Setting the formulae for the scaling------------------
##------------------------------Mini-max scaling--------------------------------
min_max_scale <- function(x) {
(x - min(x)) / (max(x) - min(x))
}
##-----------------------------Maxi-min scaling---------------------------------
max_min_scale <- function(x) {
(max(x) - x) / (max(x) - min(x))
}
## Specifying the mini-max and maxi-min variables based on the upward and downward
## influence of the variables on the Household Vulnerability
##-----------------------------Mini-max variables-------------------------------
min_max_vars <- c()
##---------------------------------Maxi-min variables---------------------------
max_min_vars <- c("hh_age",     "hh_edu",      "max_hh_edu",
"implements", "livestock",   "land",
"hh_caste",   "bank_saving", "jewellery",
"livelihood_no")
########## Creating Dataframe after scaling ###########
prep_data <- full_panel %>% mutate(across(all_of(min_max_vars), min_max_scale),
across(all_of(max_min_vars), max_min_scale))
saveRDS(prep_data, "../dataset/processed/normalised_data.rds")
#######Adding the variables#########
hvi_data <- prep_data %>%
mutate(hvi                     = (hh_age      + hh_edu      + max_hh_edu  +
implements  + livestock   + land        +
hh_caste    + bank_saving + jewellery   +
livelihood_no)/10,
env_tot_income_ratio    = (env_income/total_income),
env_tot_income_ratio_    = env_tot_income_ratio + 2.409811,  #2.409811 was added to make the negative values to 1 for log transformation
ln_env_tot_income_ratio = log(env_tot_income_ratio_),
dependency_ratio        = (child_no+elders_no)/(male_adult_no + female_adult_no),
dependency_ratio        = case_when(dependency_ratio == "Inf" ~ 0,
TRUE ~ dependency_ratio),
ln_debt                 = log(debt),
ln_debt                 = case_when(ln_debt == "-Inf" ~ 0,
TRUE ~ ln_debt))
join_data<-hvi_data |>
select(hh_code, hvi, env_tot_income_ratio, ln_env_tot_income_ratio, dependency_ratio, ln_debt)
final_data<-left_join(full_panel, join_data, by = "hh_code")
saveRDS(final_data, "../dataset/processed/final_data.rds")
mean_sd_1 <- final_data %>%
group_by(year, district) %>%
summarise(
mean_hh_age          = mean(hh_age),
sd_hh_age            = sd(hh_age),
mean_hh_edu          = mean(hh_edu),
sd_hh_edu            = sd(hh_edu),
mean_max_hh_edu      = mean(max_hh_edu),  # Fix: Add closing parenthesis here
sd_max_hh_edu        = sd(max_hh_edu),
mean_hh_caste        = mean(hh_caste),
sd_hh_caste          = sd(hh_caste),
mean_male_adult_no   = mean(male_adult_no),
sd_male_adult_no     = sd(male_adult_no),
mean_female_adult_no = mean(female_adult_no),
sd_female_adult_no   = sd(female_adult_no),
mean_child_no        = mean(child_no),
sd_child_no          = sd(child_no),
mean_elders_no       = mean(elders_no),
sd_elders_no         = sd(elders_no),
mean_implements      = mean(implements),
sd_implements        = sd(implements),
mean_livestock       = mean(livestock),
sd_livestock         = sd(livestock),
mean_land            = mean(land),
sd_land              = sd(land),
mean_total_income    = mean(total_income),
sd_total_income      = sd(total_income),
mean_bank_saving     = mean(bank_saving),
sd_bank_saving       = sd(bank_saving),
mean_jewellery       = mean(jewellery),
sd_jewellery         = sd(jewellery),
mean_livelihood_no   = mean(livelihood_no),
sd_livelihood_no     = sd(livelihood_no),
mean_hvi             = mean(hvi),
sd_hvi               = sd(hvi)) %>%
mutate(   mean_sd_hh_age          = paste(mean_hh_age, " (", sd_hh_age, ")"),
mean_sd_hh_edu          = paste(mean_hh_edu, " (", sd_hh_edu, ")"),
mean_sd_max_hh_edu      = paste(mean_max_hh_edu, " (", sd_max_hh_edu, ")"),
mean_sd_hh_caste        = paste(mean_hh_caste, " (", sd_hh_caste, ")"),
mean_sd_male_adult_no   = paste(mean_male_adult_no, " (", sd_male_adult_no, ")"),
mean_sd_female_adult_no = paste(mean_female_adult_no, " (", sd_female_adult_no, ")"),
mean_sd_child_no        = paste(mean_child_no, " (", sd_child_no, ")"),
mean_sd_elders_no       = paste(mean_elders_no, " (", sd_elders_no, ")"),
mean_sd_implements      = paste(mean_implements, " (", sd_implements, ")"),
mean_sd_livestock       = paste(mean_livestock, " (", sd_livestock, ")"),
mean_sd_land            = paste(mean_land, " (", sd_land, ")"),
mean_sd_total_income    = paste(mean_total_income, " (", sd_total_income, ")"),
mean_sd_bank_saving     = paste(mean_bank_saving, " (", sd_bank_saving, ")"),
mean_sd_jewellery       = paste(mean_jewellery, " (", sd_jewellery, ")"),
mean_sd_livelihood_no   = paste(mean_livelihood_no, " (", sd_livelihood_no, ")"),
mean_sd_hvi             = paste(mean_hvi, " (", sd_hvi, ")"))
mean_sd_2 <- final_data %>%
group_by(year, district, vdc) %>%
summarise(
mean_env_dependence      = mean(env_tot_income_ratio),
sd_env_dependence        = sd(env_tot_income_ratio),
mean_dependency_ratio    = mean(dependency_ratio),
sd_dependency_ratio      = sd(dependency_ratio),
mean_debt                = mean(debt),  # Fix: Add closing parenthesis here
sd_debt                  = sd(debt),
mean_shock               = mean(shocks_no),
sd_shock                 = sd(shocks_no)) %>%
mutate(   mean_sd_env_dependence   = paste(mean_env_dependence, " (", sd_env_dependence, ")"),
mean_sd_dependency_ratio = paste(mean_dependency_ratio, " (", sd_dependency_ratio, ")"),
mean_sd_debt             = paste(mean_debt, " (", sd_debt, ")"),
mean_sd_shock            = paste(mean_shock, " (", sd_shock, ")"))
View(mean_sd_2)
View(hvi_data)
join_data<-hvi_data |>
select(hh_code, hvi, env_tot_income_ratio, ln_env_tot_income_ratio, dependency_ratio, ln_debt)
#######Adding the variables#########
hvi_data <- prep_data %>%
mutate(hvi                     = (hh_age      + hh_edu      + max_hh_edu  +
implements  + livestock   + land        +
hh_caste    + bank_saving + jewellery   +
livelihood_no)/10,
env_tot_income_ratio    = (env_income/total_income),
env_tot_income_ratio    = case_when(env_tot_income_ratio == "NaN" ~ 0,
TRUE ~ env_tot_income_ratio),
env_tot_income_ratio_    = env_tot_income_ratio + 2.409811,  #2.409811 was added to make the negative values to 1 for log transformation
ln_env_tot_income_ratio = log(env_tot_income_ratio_),
dependency_ratio        = (child_no+elders_no)/(male_adult_no + female_adult_no),
dependency_ratio        = case_when(dependency_ratio == "Inf" ~ 0,
TRUE ~ dependency_ratio),
ln_debt                 = log(debt),
ln_debt                 = case_when(ln_debt == "-Inf" ~ 0,
TRUE ~ ln_debt))
join_data<-hvi_data |>
select(hh_code, hvi, env_tot_income_ratio, ln_env_tot_income_ratio, dependency_ratio, ln_debt)
final_data<-left_join(full_panel, join_data, by = "hh_code")
saveRDS(final_data, "../dataset/processed/final_data.rds")
mean_sd_1 <- final_data %>%
group_by(year, district) %>%
summarise(
mean_hh_age          = mean(hh_age),
sd_hh_age            = sd(hh_age),
mean_hh_edu          = mean(hh_edu),
sd_hh_edu            = sd(hh_edu),
mean_max_hh_edu      = mean(max_hh_edu),  # Fix: Add closing parenthesis here
sd_max_hh_edu        = sd(max_hh_edu),
mean_hh_caste        = mean(hh_caste),
sd_hh_caste          = sd(hh_caste),
mean_male_adult_no   = mean(male_adult_no),
sd_male_adult_no     = sd(male_adult_no),
mean_female_adult_no = mean(female_adult_no),
sd_female_adult_no   = sd(female_adult_no),
mean_child_no        = mean(child_no),
sd_child_no          = sd(child_no),
mean_elders_no       = mean(elders_no),
sd_elders_no         = sd(elders_no),
mean_implements      = mean(implements),
sd_implements        = sd(implements),
mean_livestock       = mean(livestock),
sd_livestock         = sd(livestock),
mean_land            = mean(land),
sd_land              = sd(land),
mean_total_income    = mean(total_income),
sd_total_income      = sd(total_income),
mean_bank_saving     = mean(bank_saving),
sd_bank_saving       = sd(bank_saving),
mean_jewellery       = mean(jewellery),
sd_jewellery         = sd(jewellery),
mean_livelihood_no   = mean(livelihood_no),
sd_livelihood_no     = sd(livelihood_no),
mean_hvi             = mean(hvi),
sd_hvi               = sd(hvi)) %>%
mutate(   mean_sd_hh_age          = paste(mean_hh_age, " (", sd_hh_age, ")"),
mean_sd_hh_edu          = paste(mean_hh_edu, " (", sd_hh_edu, ")"),
mean_sd_max_hh_edu      = paste(mean_max_hh_edu, " (", sd_max_hh_edu, ")"),
mean_sd_hh_caste        = paste(mean_hh_caste, " (", sd_hh_caste, ")"),
mean_sd_male_adult_no   = paste(mean_male_adult_no, " (", sd_male_adult_no, ")"),
mean_sd_female_adult_no = paste(mean_female_adult_no, " (", sd_female_adult_no, ")"),
mean_sd_child_no        = paste(mean_child_no, " (", sd_child_no, ")"),
mean_sd_elders_no       = paste(mean_elders_no, " (", sd_elders_no, ")"),
mean_sd_implements      = paste(mean_implements, " (", sd_implements, ")"),
mean_sd_livestock       = paste(mean_livestock, " (", sd_livestock, ")"),
mean_sd_land            = paste(mean_land, " (", sd_land, ")"),
mean_sd_total_income    = paste(mean_total_income, " (", sd_total_income, ")"),
mean_sd_bank_saving     = paste(mean_bank_saving, " (", sd_bank_saving, ")"),
mean_sd_jewellery       = paste(mean_jewellery, " (", sd_jewellery, ")"),
mean_sd_livelihood_no   = paste(mean_livelihood_no, " (", sd_livelihood_no, ")"),
mean_sd_hvi             = paste(mean_hvi, " (", sd_hvi, ")"))
mean_sd<-stargazer(mean_sd, title = "Mean and Standard Deviation of variables used in HVI construction", align = T, out = "../output/summary_statistics/mean_sd.tex")
mean_sd_2 <- final_data %>%
group_by(year, district, vdc) %>%
summarise(
mean_env_dependence      = mean(env_tot_income_ratio),
sd_env_dependence        = sd(env_tot_income_ratio),
mean_dependency_ratio    = mean(dependency_ratio),
sd_dependency_ratio      = sd(dependency_ratio),
mean_debt                = mean(debt),  # Fix: Add closing parenthesis here
sd_debt                  = sd(debt),
mean_shock               = mean(shocks_no),
sd_shock                 = sd(shocks_no)) %>%
mutate(   mean_sd_env_dependence   = paste(mean_env_dependence, " (", sd_env_dependence, ")"),
mean_sd_dependency_ratio = paste(mean_dependency_ratio, " (", sd_dependency_ratio, ")"),
mean_sd_debt             = paste(mean_debt, " (", sd_debt, ")"),
mean_sd_shock            = paste(mean_shock, " (", sd_shock, ")"))
View(mean_sd_2)
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
data_dir<-"../../dataset/"
output  <-"../../output/"
data <- read_dta(paste0(data_dir, "final_data.rds"))
library(plm)
library(stargazer)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("HH_Code", "Year"))
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
data_dir<-"../../dataset/"
output  <-"../../output/"
data <- read_dta(paste0(data_dir, "/processed/final_data.rds"))
data <- readRDS(paste0(data_dir, "/processed/final_data.rds"))
library(plm)
library(stargazer)
View(data)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("hh_code", "year"))
formula <- HVI ~ ln_Env_Tot_Ratio_Trsfm1
formula <- HVI ~ ln_env_tot_income_ratio
adding_variables <- c("ln_debt",      "depndency_ratio", "shocks_no",
"factor(year)", "factor(dist)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
pols.1 <- models[[1]]
pols.2 <- models[[2]]
formula <- HVI ~ ln_env_tot_income_ratio
adding_variables <- c("ln_debt",      "depndency_ratio", "shocks_no",
"factor(year)", "factor(district)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
formula <- hvi ~ ln_env_tot_income_ratio
adding_variables <- c("ln_debt",      "depndency_ratio", "shocks_no",
"factor(year)", "factor(district)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
formula <- hvi ~ ln_env_tot_income_ratio
adding_variables <- c("ln_debt",      "dependency_ratio", "shocks_no",
"factor(year)", "factor(district)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
adding_variables <- c("ln_debt",      "dependency_ratio", "shocks_no",
"factor(year)", "factor(district)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
pols.1 <- models[[1]]
pols.2 <- models[[2]]
pols.3 <- models[[3]]
pols.4 <- models[[4]]
pols.5 <- models[[5]]
pols.6 <- models[[6]]
pols.7 <- models[[7]]
## clear plots
if(!is.null(dev.list()))dev.off()
## clean workspace
rm(list=ls())
## set working directory
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
data_dir<-"../../dataset/"
output  <-"../../output/"
data <- readRDS(paste0(data_dir, "/processed/final_data.rds"))
library(plm)
library(stargazer)
##-----------------Decalre data to be a Panel-----------------------------------
pdata<-pdata.frame(data, index=c("hh_code", "year"))
formula <- hvi ~ ln_env_tot_income_ratio
adding_variables <- c("ln_debt",      "dependency_ratio", "shocks_no",
"factor(year)", "factor(district)",    "factor(vdc)")
models <- list()
# Loop to create regression models
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
models <- list()
for (i in 0:length(adding_variables)) {
if (i == 0) {
formula <- formula
} else {
formula <- as.formula(paste(deparse(formula), paste(adding_variables[1:i], collapse = " + "), sep = " + "))
}
models[[i + 1]] <- plm(formula, data = pdata, model = "pooling")
}
